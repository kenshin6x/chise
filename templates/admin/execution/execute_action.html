
{% extends "admin/base_site.html" %}
{% load i18n admin_static admin_modify %}

{% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}
{% block breadcrumbs %}{% if not is_popup %}
<div class="breadcrumbs">  
    <a href="../../../../">{% trans "Home" %}</a> ›
    <a href="../../../">{{ opts.app_label|capfirst|escape }}</a> ›
    <a href="../../">{{ opts.verbose_name_plural|capfirst }}</a> ›
    {% trans 'Execution' %} #{{ entry.pk }}</div>
{% endif %}{% endblock %}
{% block content %}

<div id="content-main">
	<ul class="object-tools">
		<li>
			{% if perms.execution.can_reexecute %}
				{% if entry.is_finished %}
	    			<a href="{% url 'admin:execution-reexecute' entry.pk %}" class="historylink">{% trans 'Re-execute' %}</a>
				{% endif %}
			{% endif %}
		</li>    
	</ul>

	<fieldset class="module aligned">
		<div class="row">
			<div class="col-4 inline-grid">
				<label>{% trans 'Date Started' %}: </label> <div id="date-started">{% if entry.date_started %}{{entry.date_started}}{% else %}-{% endif %}</div>
				<hr style="margin: 25px 0">
				<label>{% trans 'Date Finished' %}: </label> <div id="date-finished">{% if entry.date_finished %}{{entry.date_finished}}{% else %}-{% endif %}</div>
				<hr style="margin: 25px 0">
				<label>{% trans 'Status' %}: </label> <div id="execution-status" class="{{ entry.status|lower }}">{{ entry.status }}</div>
			</div>
			<div class="col-4 inline-flex">
				<div class="chart-container" style="position: relative; height:5vh; width:10vw">
					<canvas id="module-chart" width="10px" height="10px"></canvas>
				</div>
				<div class="chart-container" style="position: relative; height:5vh; width:10vw">
					<canvas id="script-chart" width="10px" height="10px"></canvas>
				</div>
			</div>
		</div>
	</fieldset>
	
	<hr style="margin: 25px 0">

	<table id="checkpoints-table" class="result_list" width="100%">
		<thead>
			<th scope="col">{% trans 'Status' %}</th>
			<th scope="col">{% trans 'Reference' %}</th>
			<th scope="col">{% trans 'Object' %}</th>
			<th scope="col">{% trans 'Name' %}</th>
			<th scope="col">{% trans 'Description' %}</th>
			<th scope="col">{% trans 'Date Checkpoint' %}</th>
		</thead>
		<tbody>
			
		</tbody>
	</table>

	<hr style="margin: 25px 0">
</div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="{% static 'js/Chart.js' %}"></script>
<script type="text/javascript" src="{% static 'js/execution/admin-script.js' %}"></script>
<script type="text/javascript">
	var execute_runtime = {% if entry.date_finished %}false{% else %}true{% endif %};
	runtime_loop(execute_runtime);
</script>
{% endblock %}